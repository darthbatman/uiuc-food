"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const csv_writer_1 = require("../lib/csv-writer");
const helper_1 = require("./helper");
const helper_2 = require("./helper");
describe('CsvWriter', () => {
    it('throws an error if file write failed', () => {
        const fs = { writeFile: function () {
                arguments[3](new Error('WRITE_FILE_ERROR'));
            } };
        const arrayCsvStringifier = helper_2.mockType({
            getHeaderString: () => 'HEADER_STRING',
            stringifyRecords: () => 'CSV_STRING'
        });
        const writer = new csv_writer_1.CsvWriter(arrayCsvStringifier, 'FILE_PATH', fs);
        return writer.writeRecords([['RECORDS']]).then(() => new Error('Should have been failed'), e => {
            helper_1.assertContain(e.message, 'WRITE_FILE_ERROR');
        });
    });
});
//# sourceMappingURL=csv-writer.test.js.map