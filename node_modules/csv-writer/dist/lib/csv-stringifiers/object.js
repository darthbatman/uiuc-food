"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const abstract_1 = require("./abstract");
class ObjectCsvStringifier extends abstract_1.CsvStringifier {
    constructor(fieldStringifier, fieldDelimiter, header) {
        super(fieldStringifier, fieldDelimiter);
        this.header = header;
    }
    getHeaderRecord() {
        if (!this.isObjectHeader)
            return null;
        return this.header.reduce((memo, field) => Object.assign({}, memo, { [field.id]: field.title }), {});
    }
    getRecordAsArray(record) {
        return this.fieldIds.map(field => record[field]);
    }
    get fieldIds() {
        return this.isObjectHeader ? this.header.map(column => column.id) : this.header;
    }
    get isObjectHeader() {
        return isObject(this.header && this.header[0]);
    }
}
exports.ObjectCsvStringifier = ObjectCsvStringifier;
function isObject(value) {
    return Object.prototype.toString.call(value) === '[object Object]';
}
//# sourceMappingURL=object.js.map